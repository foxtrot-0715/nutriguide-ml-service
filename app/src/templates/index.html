<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>NutriGuide Service</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .nav-pills .nav-link.active { background-color: #198754 !important; }
        .hero-section { background: white; padding: 40px; border-radius: 20px; border: 1px solid #dee2e6; }
        .feature-icon { font-size: 2rem; margin-bottom: 1rem; }
        @media (prefers-color-scheme: dark) {
            body { background-color: #121212 !important; color: #e0e0e0; }
            .hero-section, .card { background-color: #1e1e1e !important; border-color: #333 !important; }
            .form-control { background-color: #2b2b2b; color: white; border-color: #444; }
            .table { color: #e0e0e0; }
        }
    </style>
</head>
<body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4 shadow">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#" onclick="location.reload()">ü•¶ NutriGuide</a>
            <div id="userBadge" class="d-none">
                <span class="navbar-text me-3 text-light">–ü—Ä–∏–≤–µ—Ç, <strong id="currentUsername"></strong> (ID: <span id="currentUserId"></span>)</span>
                <button class="btn btn-outline-danger btn-sm" onclick="window.logout()">–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div id="welcomeSection" class="row mb-5 align-items-center d-none">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-3">–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥ —Å –ò–ò</h1>
                <p class="lead mb-4">–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–∞–≤–∞ –±–ª—é–¥ –∏ —Ä–∞—Å—á–µ—Ç –ö–ë–ñ–£. –ü—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –µ–¥—ã.</p>
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="feature-icon">üìä</div>
                        <h5>–¢–æ—á–Ω–æ—Å—Ç—å</h5>
                        <p class="text-muted small">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—É—á–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤.</p>
                    </div>
                    <div class="col-md-6">
                        <div class="feature-icon">ü™ô</div>
                        <h5>–ì–∏–±–∫–æ—Å—Ç—å</h5>
                        <p class="text-muted small">–ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—á–µ—Ç–æ–≤ –∑–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 offset-lg-1">
                <div class="card p-4 shadow border-0">
                    <ul class="nav nav-pills nav-fill mb-4">
                        <li class="nav-item"><button id="nav-login-btn" class="nav-link active" onclick="window.showTab('login')">–í—Ö–æ–¥</button></li>
                        <li class="nav-item"><button id="nav-reg-btn" class="nav-link" onclick="window.showTab('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button></li>
                    </ul>
                    <div id="loginSection" class="tab-content">
                        <input type="text" id="loginUser" class="form-control mb-2" placeholder="–õ–æ–≥–∏–Ω">
                        <input type="password" id="loginPass" class="form-control mb-3" placeholder="–ü–∞—Ä–æ–ª—å">
                        <button class="btn btn-success w-100" onclick="window.login()">–í–æ–π—Ç–∏</button>
                    </div>
                    <div id="registerSection" class="tab-content d-none">
                        <input type="text" id="regUser" class="form-control mb-2" placeholder="–õ–æ–≥–∏–Ω">
                        <input type="email" id="regEmail" class="form-control mb-2" placeholder="Email">
                        <input type="password" id="regPass" class="form-control mb-3" placeholder="–ü–∞—Ä–æ–ª—å">
                        <button class="btn btn-primary w-100" onclick="window.register()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="cabinetSection" class="tab-content d-none">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card p-4 shadow-sm h-100 text-center border-0">
                        <h5 class="text-muted">–ë–∞–ª–∞–Ω—Å</h5>
                        <h1 class="display-4 my-3">ü™ô <span id="balanceAmount">0</span></h1>
                        <button class="btn btn-outline-success w-100" onclick="window.deposit()">–ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á–µ—Ç</button>
                    </div>
                </div>
                <div class="col-md-8 mb-4">
                    <div class="hero-section shadow-sm h-100 border-0">
                        <h4>–ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑</h4>
                        <textarea id="predictInput" class="form-control mb-3" rows="3" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ, —á—Ç–æ –≤—ã —Å—ä–µ–ª–∏ —Å–µ–≥–æ–¥–Ω—è..."></textarea>
                        <button class="btn btn-dark btn-lg w-100" onclick="window.sendPredict()">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å (10 –∫—Ä.)</button>
                    </div>
                </div>
            </div>

            <div class="card p-4 shadow-sm mb-4 border-0">
                <h5>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤</h5>
                <div class="table-responsive">
                    <table class="table table-hover mt-2">
                        <thead><tr><th>–î–∞—Ç–∞</th><th>ID</th><th>–°—Ç–∞—Ç—É—Å</th><th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th></tr></thead>
                        <tbody id="tasksHistory"></tbody>
                    </table>
                </div>
            </div>

            <div class="card p-4 shadow-sm border-0">
                <h5>–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h5>
                <div class="table-responsive">
                    <table class="table table-hover mt-2">
                        <thead><tr><th>–î–∞—Ç–∞</th><th>–¢–∏–ø</th><th>–°—É–º–º–∞</th></tr></thead>
                        <tbody id="transHistory"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/app.js"></script>
</body>
</html>
